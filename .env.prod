# ================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# Resource Group: refopen-prod-rg
# Location: Central India (southindia)
# Last Updated: 2024
# ================================================================

# ========================================================================
# ?? APPLICATION
# ========================================================================
NODE_ENV=production
APP_NAME=NexHire
APP_ENV=production
PORT=8080
API_VERSION=v1

# ========================================================================
# ?? JWT_AUTHENTICATION
# ========================================================================
# ?? Using Azure Key Vault reference for production secrets
JWT_SECRET=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/JwtSecret/)
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d
JWT_ACCESS_TOKEN_EXPIRY=7d
JWT_REFRESH_TOKEN_EXPIRY=30d
BCRYPT_SALT_ROUNDS=12

# ========================================================================
# ?? FEATURE_FLAGS
# ========================================================================
FEATURE_FLAG_REFERRAL_SYSTEM=true
FEATURE_FLAG_GOOGLE_SIGNIN=true
FEATURE_FLAG_PAYMENT_SYSTEM=true
FEATURE_FLAG_JOB_SCRAPING=true
ENABLE_REFERRAL_SYSTEM=true
ENABLE_WALLET_SYSTEM=true
ENABLE_JOB_SCRAPING=true
ENABLE_GOOGLE_OAUTH=true

AZURE_STORAGE_CONTAINER_ARCHIVED_JOBS=archived-jobs
JOB_ARCHIVAL_ENABLED=true
JOB_ARCHIVAL_DAYS_OLD=60

# ========================================================================
# ?? API_CORS
# ========================================================================
CORS_ORIGINS=*
CORS_ALLOWED_ORIGINS=https://refopen-frontend-web.azurestaticapps.net,https://refopen.com,https://www.refopen.com,https://app.refopen.com
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=900000

# ========================================================================
# ?? RAZORPAY - PRODUCTION CREDENTIALS (Key Vault)
# ========================================================================
RAZORPAY_KEY_ID=rzp_live_RHBIO2dq7CFGiW
RAZORPAY_KEY_SECRET=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/RazorpayKeySecret/)
RAZORPAY_WEBHOOK_SECRET=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/RazorpayWebhookSecret/)


# ========================================================================

# JOB SCRAPING & ENRICHMENT APIs

# ========================================================================

# Adzuna Job Search API (Free tier: 1000 calls/month)

ADZUNA_APP_ID=f88adc65

ADZUNA_APP_KEY=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/AdzunaAppKey/)



# Clearbit Company API (Enrichment for organization data)

# Get your free API key at: https://clearbit.com/

# Free tier: 50 lookups/month, 0.50 USD per additional lookup

CLEARBIT_API_KEY=



# Job Scraping Configuration

SCHEDULER_ENABLED=true

SCRAPING_INTERVAL_HOURS=24

AUTO_START_SCHEDULER=true

INIT_SCHEDULER=true

# ========================================================================
# ?? GOOGLE_OAUTH
# ========================================================================
GOOGLE_CLIENT_ID_WEB=179542785325-ava51t8ercmv4vg6aef1ftn9rqef6pis.apps.googleusercontent.com
GOOGLE_CLIENT_ID_ANDROID=179542785325-ava51t8ercmv4vg6aef1ftn9rqef6pis.apps.googleusercontent.com
GOOGLE_CLIENT_ID_IOS=179542785325-c1mhgrhu0mhmjj896h6c7ateuucmp2nc.apps.googleusercontent.com

# ========================================================================
# ?? AZURE_STORAGE - PRODUCTION (refopenstoragesi) - Key Vault Secured
# ========================================================================
AZURE_STORAGE_CONNECTION_STRING=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/AzureStorageConnectionString/)
AZURE_STORAGE_CONTAINER_NAME=refopen-files
AZURE_STORAGE_ACCOUNT_NAME=refopenstoragesi
AZURE_STORAGE_ACCOUNT_KEY=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/AzureStorageAccountKey/)

# ========================================================================
# ?? APPLICATION_INSIGHTS - PRODUCTION (refopen-api-func)
# ========================================================================
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=4febf0d0-3638-47c1-9455-4565ccf9988d;IngestionEndpoint=https://centralindia-0.in.applicationinsights.azure.com/;LiveEndpoint=https://centralindia.livediagnostics.monitor.azure.com/;ApplicationId=7a4124b5-9e42-4be2-8f64-04721cf01aec
APPINSIGHTS_INSTRUMENTATIONKEY=4febf0d0-3638-47c1-9455-4565ccf9988d

# ========================================================================
# ??? DATABASE - PRODUCTION (refopen-sqlserver-ci)
# ========================================================================
DB_SERVER=refopen-sqlserver-ci.database.windows.net
DB_NAME=refopen-sql-db
DB_DATABASE=refopen-sql-db
DB_USER=sqladmin
DB_PASSWORD=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/SqlPassword/)
DB_PORT=1433
DB_ENCRYPT=true
DB_TRUST_SERVER_CERTIFICATE=false
DB_CONNECTION_TIMEOUT=30

# Full Connection String (Key Vault Secured)
DB_CONNECTION_STRING=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/DbConnectionString/)

# ========================================================================
# ? AZURE_FUNCTION - PRODUCTION (refopen-api-func)
# ========================================================================
FUNCTIONS_WORKER_RUNTIME=node
WEBSITE_NODE_DEFAULT_VERSION=~20
FUNCTIONS_EXTENSION_VERSION=~4

# AzureWebJobsStorage - Azure managed (uses Key Vault reference for storage key)
AzureWebJobsStorage=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/AzureStorageConnectionString/)

# Content Share - Azure managed (uses Key Vault reference)
WEBSITE_CONTENTAZUREFILECONNECTIONSTRING=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/AzureStorageConnectionString/)
WEBSITE_CONTENTSHARE=refopen-api-func-content
WEBSITE_RUN_FROM_PACKAGE=1
ENABLE_ORYX_BUILD=false
SCM_DO_BUILD_DURING_DEPLOYMENT=false

# ========================================================================
# ?? STORAGE_CONTAINERS
# ========================================================================
AZURE_STORAGE_CONTAINER_DOCUMENTS=documents
AZURE_STORAGE_CONTAINER_PROFILE_IMAGES=profile-images
AZURE_STORAGE_CONTAINER_RESUMES=resumes
AZURE_STORAGE_CONTAINER_REFERRAL_PROOFS=referral-proofs

# ========================================================================
# ?? REFERRAL & BONUS SYSTEM
# ========================================================================
WELCOME_BONUS_AMOUNT=100
REFERRAL_BONUS_AMOUNT=50
MIN_WALLET_RECHARGE=100
MAX_WALLET_RECHARGE=100000

# ========================================================================
# ?? API_ENDPOINTS
# ========================================================================
API_BASE_URL=https://refopen-api-func.azurewebsites.net/api
FRONTEND_URL=https://refopen.com

# ========================================================================
# ?? EMAIL_SERVICE (AWS SES)
# ========================================================================
AWS_REGION=ap-south-1
EMAIL_FROM=noreply@refopen.com
EMAIL_FROM_NAME=NexHire

# ========================================================================
# ?? AZURE COMMUNICATION SERVICES (Email)
# ========================================================================
ACS_CONNECTION_STRING=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/AcsConnectionString/)
EMAIL_SENDER_ADDRESS=noreply@refopen.com
ADMIN_NOTIFICATION_EMAILS=parimalkumar261@gmail.com

# ========================================================================
# üîê ENCRYPTION (For sensitive data like CompanyEmail)
# ========================================================================
ENCRYPTION_KEY=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/ENCRYPTION-KEY/)

# ========================================================================
# ü§ñ AI SERVICES (Gemini, Groq, Jina)
# ========================================================================
GEMINI_API_KEY=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/GeminiApiKey/)
GROQ_API_KEY=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/GroqApiKey/)
JINA_API_KEY=@Microsoft.KeyVault(SecretUri=https://refopen-keyvault-prod.vault.azure.net/secrets/JinaApiKey/)

# ========================================================================
# üìù LOGGING
# ========================================================================
LOG_LEVEL=info
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true

# ================================================================
# ?? DEPLOYMENT INFO
# ================================================================
# Resource Group: refopen-prod-rg
# Location: Central India (southindia)
# Function App: refopen-api-func
# Storage Account: refopenstoragesi
# SQL Server: refopen-sqlserver-ci
# SQL Database: refopen-sql-db
# Static Web App: refopen-frontend-web
# App Insights: refopen-monitor
# ================================================================
