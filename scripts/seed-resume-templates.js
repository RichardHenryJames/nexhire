/**
 * Seed Resume Builder templates with real HTML + CSS
 * Run: node scripts/seed-resume-templates.js
 */
const sql = require('mssql');
const config = {
  server: 'refopen-sqlserver-dev.database.windows.net',
  database: 'refopen-sql-db-dev',
  user: 'sqladmin',
  password: 'RefOpenDev@2024!Tle@yTK$',
  options: { encrypt: true, trustServerCertificate: false, connectTimeout: 30000 }
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SHARED: Section renderers produce these CSS classes:
//   .section, .section-title, .entry, .entry-header,
//   .entry-title, .entry-subtitle, .entry-date, .entry-location,
//   .bullets, .skill-category, .skill-tag, .cert-entry, .sep
// 
// Template placeholders:
//   {{STYLES}}              ‚Üí CssTemplate column
//   {{TITLE}}               ‚Üí escaped full name
//   {{FULL_NAME}}           ‚Üí name
//   {{CONTACT_HTML}}        ‚Üí email | phone | location
//   {{LINKS_HTML}}          ‚Üí LinkedIn ¬∑ GitHub ¬∑ Portfolio
//   {{SUMMARY_TEXT}}        ‚Üí professional summary
//   {{SECTIONS_HTML}}       ‚Üí all sections combined
//   {{MAIN_SECTIONS_HTML}}  ‚Üí main column (for 2-col)
//   {{SIDEBAR_SECTIONS_HTML}} ‚Üí sidebar (for 2-col)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const TEMPLATES = [
  {
    slug: 'classic',
    html: `<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>{{TITLE}} - Resume</title><style>{{STYLES}}</style></head><body><div class="resume"><header class="header"><h1 class="name">{{FULL_NAME}}</h1><div class="contact">{{CONTACT_HTML}}</div><div class="links">{{LINKS_HTML}}</div></header><div class="summary">{{SUMMARY_TEXT}}</div><main>{{SECTIONS_HTML}}</main></div></body></html>`,
    css: `@import url('https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600;700&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{font-family:'EB Garamond',Georgia,serif;font-size:10pt;line-height:1.35;color:#1a1a1a;background:#fff}.resume{max-width:8.5in;margin:0 auto;padding:.4in .7in}.header{text-align:center;margin-bottom:8pt;padding-bottom:6pt;border-bottom:1.5px solid #1a1a1a}.name{font-size:22pt;font-weight:700;letter-spacing:1pt;text-transform:uppercase;margin-bottom:4pt;color:#1a1a1a}.contact{font-size:9pt;color:#444;margin-bottom:2pt}.contact .sep{margin:0 6pt;color:#999}.links{font-size:9pt}.links a{color:#2563EB;text-decoration:none}.links .sep{margin:0 5pt;color:#ccc}.summary{font-size:9.5pt;color:#333;font-style:italic;text-align:center;margin-bottom:10pt;padding:0 16pt;line-height:1.4}.section{margin-bottom:8pt}.section-title{font-size:10pt;font-weight:700;text-transform:uppercase;letter-spacing:1.5pt;color:#1a1a1a;border-bottom:1px solid #1a1a1a;padding-bottom:2pt;margin-bottom:5pt}.entry{margin-bottom:5pt}.entry-header{display:flex;justify-content:space-between;align-items:baseline}.entry-title{font-weight:700;font-size:10pt}.entry-subtitle{font-size:9.5pt;color:#555}.entry-date{font-size:8.5pt;color:#777;white-space:nowrap}.entry-location{font-size:8.5pt;color:#777;margin-top:1pt}.bullets{padding-left:16pt;margin-top:2pt}.bullets li{font-size:9.5pt;margin-bottom:1pt;line-height:1.35}.skill-category{margin-bottom:3pt}.skill-category-name{font-weight:600;font-size:9.5pt}.skill-tags{display:flex;flex-wrap:wrap;gap:3pt;margin-top:2pt}.skill-tag{font-size:8.5pt;padding:1pt 6pt;border:1px solid #ddd;border-radius:3pt;background:#f9f9f9}.cert-entry{margin-bottom:2pt}.cert-name{font-weight:600;font-size:9.5pt}.cert-issuer{font-size:8.5pt;color:#777}@media print{body{padding:0}.resume{padding:.35in .65in}}`
  },
  {
    slug: 'modern',
    html: `<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>{{TITLE}} - Resume</title><style>{{STYLES}}</style></head><body><div class="resume"><header class="header"><h1 class="name">{{FULL_NAME}}</h1><div class="contact">{{CONTACT_HTML}}</div><div class="links">{{LINKS_HTML}}</div></header><div class="summary">{{SUMMARY_TEXT}}</div><div class="two-col"><main class="main-col">{{MAIN_SECTIONS_HTML}}</main><aside class="sidebar-col">{{SIDEBAR_SECTIONS_HTML}}</aside></div></div></body></html>`,
    css: `@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Inter',system-ui,sans-serif;font-size:9.5pt;line-height:1.35;color:#111827;background:#fff}.resume{max-width:8.5in;margin:0 auto;padding:.4in .55in}.header{margin-bottom:8pt;padding-bottom:6pt;border-bottom:2px solid #2563EB}.name{font-size:22pt;font-weight:700;letter-spacing:-.5pt;color:#111827;margin-bottom:3pt}.contact{font-size:9pt;color:#6B7280;margin-bottom:2pt}.contact .sep{margin:0 6pt;color:#D1D5DB}.links{font-size:9pt}.links a{color:#2563EB;text-decoration:none;font-weight:500}.links .sep{margin:0 5pt;color:#D1D5DB}.summary{font-size:9pt;color:#374151;margin-bottom:10pt;line-height:1.4;padding:6pt 10pt;background:#F9FAFB;border-left:3px solid #2563EB;border-radius:0 4pt 4pt 0}.two-col{display:flex;gap:18pt}.main-col{flex:2.2}.sidebar-col{flex:1;padding-left:12pt;border-left:1px solid #E5E7EB}.section{margin-bottom:8pt}.section-title{font-size:9pt;font-weight:700;text-transform:uppercase;letter-spacing:1.5pt;color:#2563EB;margin-bottom:5pt;padding-bottom:2pt;border-bottom:.75pt solid #E5E7EB}.entry{margin-bottom:5pt}.entry-header{display:flex;justify-content:space-between;align-items:baseline}.entry-title{font-weight:600;font-size:9.5pt}.entry-subtitle{font-size:9pt;color:#6B7280}.entry-date{font-size:8pt;color:#9CA3AF;white-space:nowrap;font-weight:500}.entry-location{font-size:8pt;color:#9CA3AF;margin-top:1pt}.bullets{padding-left:12pt;margin-top:2pt}.bullets li{font-size:9pt;margin-bottom:1pt;line-height:1.35;color:#374151}.skill-category{margin-bottom:4pt}.skill-category-name{font-weight:600;font-size:9pt;color:#374151}.skill-tags{display:flex;flex-wrap:wrap;gap:3pt;margin-top:2pt}.skill-tag{font-size:8pt;padding:1pt 6pt;border-radius:99pt;background:#EFF6FF;color:#1D4ED8;font-weight:500}.cert-entry{margin-bottom:2pt}.cert-name{font-weight:600;font-size:9pt}.cert-issuer{font-size:8pt;color:#9CA3AF}@media print{.resume{padding:.35in .5in}}`
  },
  {
    slug: 'minimal',
    html: `<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>{{TITLE}} - Resume</title><style>{{STYLES}}</style></head><body><div class="resume"><header class="header"><h1 class="name">{{FULL_NAME}}</h1><div class="contact">{{CONTACT_HTML}}</div><div class="links">{{LINKS_HTML}}</div></header><div class="summary">{{SUMMARY_TEXT}}</div><main>{{SECTIONS_HTML}}</main></div></body></html>`,
    css: `@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{font-family:'DM Sans',system-ui,sans-serif;font-size:9.5pt;line-height:1.35;color:#000;background:#fff}.resume{max-width:8.5in;margin:0 auto;padding:.4in .75in}.header{margin-bottom:10pt}.name{font-size:22pt;font-weight:700;letter-spacing:-.5pt;color:#000;margin-bottom:4pt}.contact{font-size:9pt;color:#666;margin-bottom:2pt}.contact .sep{margin:0 8pt;color:#ccc}.links{font-size:9pt}.links a{color:#000;text-decoration:underline;text-underline-offset:2pt}.links .sep{margin:0 6pt;color:#ccc}.summary{font-size:9.5pt;color:#333;margin-bottom:10pt;line-height:1.4}.section{margin-bottom:8pt}.section-title{font-size:9pt;font-weight:700;text-transform:uppercase;letter-spacing:2.5pt;color:#999;margin-bottom:6pt}.entry{margin-bottom:5pt}.entry-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:1pt}.entry-title{font-weight:600;font-size:9.5pt}.entry-subtitle{font-size:9pt;color:#666}.entry-date{font-size:8.5pt;color:#999;white-space:nowrap}.entry-location{font-size:8.5pt;color:#999}.bullets{padding-left:14pt;margin-top:2pt}.bullets li{font-size:9pt;margin-bottom:1pt;line-height:1.35;color:#333}.skill-category{margin-bottom:3pt}.skill-category-name{font-weight:600;font-size:9pt;color:#333}.skill-tags{display:flex;flex-wrap:wrap;gap:4pt;margin-top:2pt}.skill-tag{font-size:8.5pt;padding:2pt 8pt;border:1px solid #e0e0e0;border-radius:2pt;color:#333}.cert-entry{margin-bottom:2pt}.cert-name{font-weight:600;font-size:9pt}.cert-issuer{font-size:8.5pt;color:#999}@media print{.resume{padding:.35in .65in}}`
  },
  {
    slug: 'executive',
    html: `<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>{{TITLE}} - Resume</title><style>{{STYLES}}</style></head><body><div class="resume"><header class="header"><h1 class="name">{{FULL_NAME}}</h1><div class="contact">{{CONTACT_HTML}}</div><div class="links">{{LINKS_HTML}}</div></header><div class="summary">{{SUMMARY_TEXT}}</div><main>{{SECTIONS_HTML}}</main></div></body></html>`,
    css: `@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Source+Sans+3:wght@300;400;500;600&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Source Sans 3',sans-serif;font-size:9.5pt;line-height:1.35;color:#1F2937;background:#fff}.resume{max-width:8.5in;margin:0 auto}.header{background:#111827;color:#fff;padding:16pt 28pt 12pt;text-align:center}.name{font-family:'Playfair Display',serif;font-size:20pt;font-weight:700;letter-spacing:1.5pt;text-transform:uppercase;margin-bottom:4pt;color:#fff}.contact{font-size:8.5pt;color:rgba(255,255,255,.7);margin-bottom:2pt}.contact .sep{margin:0 6pt;color:rgba(255,255,255,.3)}.links{font-size:8.5pt}.links a{color:#93C5FD;text-decoration:none}.links .sep{margin:0 5pt;color:rgba(255,255,255,.3)}.summary{font-size:9.5pt;color:#374151;padding:10pt 28pt;margin-bottom:2pt;font-style:italic;line-height:1.4;border-bottom:1px solid #E5E7EB}main{padding:8pt 28pt 16pt}.section{margin-bottom:8pt}.section-title{font-family:'Playfair Display',serif;font-size:10pt;font-weight:700;color:#1E40AF;margin-bottom:5pt;padding-bottom:2pt;border-bottom:1pt solid #1E40AF}.entry{margin-bottom:5pt}.entry-header{display:flex;justify-content:space-between;align-items:baseline}.entry-title{font-weight:600;font-size:9.5pt;color:#111827}.entry-subtitle{font-size:9pt;color:#6B7280}.entry-date{font-size:8pt;color:#9CA3AF;white-space:nowrap}.entry-location{font-size:8pt;color:#9CA3AF;margin-top:1pt}.bullets{padding-left:14pt;margin-top:2pt}.bullets li{font-size:9pt;margin-bottom:1pt;line-height:1.35;color:#374151}.skill-category{margin-bottom:3pt}.skill-category-name{font-weight:600;font-size:9pt}.skill-tags{display:flex;flex-wrap:wrap;gap:3pt;margin-top:2pt}.skill-tag{font-size:8pt;padding:1pt 7pt;background:#EFF6FF;color:#1E40AF;border-radius:2pt;font-weight:500}.cert-entry{margin-bottom:2pt}.cert-name{font-weight:600;font-size:9pt}.cert-issuer{font-size:8pt;color:#9CA3AF}@media print{.header{padding:12pt 24pt 10pt}main{padding:6pt 24pt 12pt}}`
  },
  {
    slug: 'ats-optimized',
    html: `<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>{{TITLE}} - Resume</title><style>{{STYLES}}</style></head><body><div class="resume"><header class="header"><h1 class="name">{{FULL_NAME}}</h1><div class="contact">{{CONTACT_HTML}}</div><div class="links">{{LINKS_HTML}}</div></header><div class="summary">{{SUMMARY_TEXT}}</div><main>{{SECTIONS_HTML}}</main></div></body></html>`,
    css: `*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,Helvetica,sans-serif;font-size:10pt;line-height:1.35;color:#000;background:#fff}.resume{max-width:8.5in;margin:0 auto;padding:.4in .7in}.header{margin-bottom:8pt;padding-bottom:6pt;border-bottom:2px solid #000}.name{font-size:20pt;font-weight:700;color:#000;margin-bottom:3pt}.contact{font-size:9pt;color:#333;margin-bottom:2pt}.contact .sep{margin:0 5pt;color:#999}.links{font-size:9pt}.links a{color:#000;text-decoration:underline}.links .sep{margin:0 5pt;color:#999}.summary{font-size:9.5pt;color:#000;margin-bottom:8pt;line-height:1.4}.section{margin-bottom:8pt}.section-title{font-size:10pt;font-weight:700;text-transform:uppercase;color:#000;border-bottom:1px solid #000;padding-bottom:2pt;margin-bottom:5pt}.entry{margin-bottom:5pt}.entry-header{display:flex;justify-content:space-between;align-items:baseline}.entry-title{font-weight:700;font-size:10pt}.entry-subtitle{font-size:9.5pt;color:#333}.entry-date{font-size:9pt;color:#333;white-space:nowrap}.entry-location{font-size:9pt;color:#333;margin-top:1pt}.bullets{padding-left:16pt;margin-top:2pt}.bullets li{font-size:9.5pt;margin-bottom:1pt;line-height:1.35}.skill-category{margin-bottom:3pt}.skill-category-name{font-weight:700;font-size:9.5pt}.skill-tags{display:inline}.skill-tag{font-size:9.5pt;display:inline}.skill-tag::after{content:", "}.skill-tag:last-child::after{content:""}.cert-entry{margin-bottom:2pt}.cert-name{font-weight:700;font-size:9.5pt}.cert-issuer{font-size:9pt;color:#333}@media print{.resume{padding:.35in .65in}}`
  },
  {
    slug: 'tech',
    html: `<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>{{TITLE}} - Resume</title><style>{{STYLES}}</style></head><body><div class="resume"><header class="header"><div class="header-accent"></div><h1 class="name">{{FULL_NAME}}</h1><div class="contact">{{CONTACT_HTML}}</div><div class="links">{{LINKS_HTML}}</div></header><div class="summary">{{SUMMARY_TEXT}}</div><main>{{SECTIONS_HTML}}</main></div></body></html>`,
    css: `@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap');*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Inter',system-ui,sans-serif;font-size:9.5pt;line-height:1.35;color:#C9D1D9;background:#0D1117}.resume{max-width:8.5in;margin:0 auto;padding:.4in .6in;background:#0D1117}.header{margin-bottom:8pt;padding-bottom:8pt;border-bottom:1px solid #21262D;position:relative}.header-accent{position:absolute;top:0;left:0;width:3pt;height:100%;background:#58A6FF;border-radius:2pt}.name{font-family:'JetBrains Mono',monospace;font-size:20pt;font-weight:700;color:#F0F6FC;margin-bottom:3pt;padding-left:12pt}.contact{font-size:8.5pt;color:#8B949E;padding-left:12pt;margin-bottom:2pt}.contact .sep{margin:0 6pt;color:#30363D}.links{font-size:8.5pt;padding-left:12pt}.links a{color:#58A6FF;text-decoration:none;font-family:'JetBrains Mono',monospace;font-size:8pt}.links .sep{margin:0 5pt;color:#30363D}.summary{font-size:9pt;color:#8B949E;margin-bottom:8pt;padding:6pt 10pt;background:#161B22;border:1px solid #21262D;border-radius:4pt;border-left:2px solid #58A6FF;line-height:1.4}.section{margin-bottom:8pt}.section-title{font-family:'JetBrains Mono',monospace;font-size:8.5pt;font-weight:600;text-transform:uppercase;letter-spacing:1.5pt;color:#58A6FF;margin-bottom:5pt;padding-bottom:3pt;border-bottom:1px solid #21262D}.entry{margin-bottom:5pt;padding:5pt 8pt;background:#161B22;border:1px solid #21262D;border-radius:4pt}.entry-header{display:flex;justify-content:space-between;align-items:baseline}.entry-title{font-weight:600;font-size:9.5pt;color:#F0F6FC}.entry-subtitle{font-size:9pt;color:#8B949E}.entry-date{font-family:'JetBrains Mono',monospace;font-size:7.5pt;color:#484F58;white-space:nowrap}.entry-location{font-size:8pt;color:#484F58;margin-top:1pt}.bullets{padding-left:12pt;margin-top:2pt}.bullets li{font-size:9pt;margin-bottom:1pt;line-height:1.35;color:#C9D1D9}.skill-category{margin-bottom:3pt}.skill-category-name{font-family:'JetBrains Mono',monospace;font-weight:600;font-size:8.5pt;color:#F0F6FC}.skill-tags{display:flex;flex-wrap:wrap;gap:3pt;margin-top:2pt}.skill-tag{font-family:'JetBrains Mono',monospace;font-size:7.5pt;padding:2pt 6pt;background:#1F6FEB20;color:#58A6FF;border:1px solid #1F6FEB40;border-radius:3pt;font-weight:500}.cert-entry{margin-bottom:2pt;padding:3pt 8pt;background:#161B22;border:1px solid #21262D;border-radius:3pt}.cert-name{font-weight:600;font-size:9pt;color:#F0F6FC}.cert-issuer{font-size:8pt;color:#484F58}@media print{body{background:#fff;color:#000}.resume{background:#fff;padding:.35in .55in}.header-accent{background:#2563EB}.name,.entry-title,.cert-name,.skill-category-name{color:#000}.contact,.links a,.entry-subtitle,.entry-date,.entry-location,.cert-issuer,.bullets li,.summary{color:#333}.section-title,.skill-tag{color:#2563EB}.entry,.cert-entry,.summary{background:#f8f8f8;border-color:#e0e0e0}.skill-tag{background:#EFF6FF;border-color:#BFDBFE}}`
  }
];

(async () => {
  const pool = await sql.connect(config);
  
  for (const t of TEMPLATES) {
    const result = await pool.request()
      .input('slug', sql.NVarChar, t.slug)
      .input('html', sql.NVarChar(sql.MAX), t.html)
      .input('css', sql.NVarChar(sql.MAX), t.css)
      .query(`
        UPDATE ResumeBuilderTemplates 
        SET HtmlTemplate = @html, CssTemplate = @css, UpdatedAt = GETUTCDATE()
        WHERE Slug = @slug
      `);
    console.log(`‚úÖ ${t.slug}: ${result.rowsAffected[0]} row(s) updated`);
  }
  
  console.log('\nüéâ All 6 templates populated with real HTML+CSS!');
  pool.close();
})().catch(e => { console.error('ERROR:', e.message); process.exit(1); });
